/*
 * Copyright (c) 2021 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

/dts-v1/;
#include "supermini_nrf.dtsi"

/ {
    model = "supermini_nrf";
    chosen {
        zmk,battery = &vbatt;
    };

    // Node name must match original "EXT_POWER" label to preserve user settings.
    EXT_POWER {
        compatible = "zmk,ext-power-generic";
        control-gpios = <&gpio0 13 GPIO_ACTIVE_HIGH>;
        init-delay-ms = <50>;
    }; 

    vbatt: vbatt {
        compatible = "zmk,battery-nrf-vddh";
        io-channels = <&adc 2>;
        output-ohms = <2000000>;
        full-ohms = <(2000000 + 806000)>;
    };
    zephyr_battery: battery {
        compatible = "zephyr,battery";
        voltage-to-percentage = <
            4200 100
            4150 97
            4100 90
            4050 85
            4000 78
            3950 70
            3900 60
            3850 50
            3800 40
            3750 30
            3700 20
            3650 10
            3600 5
            3500 0
        >;
    };
};
